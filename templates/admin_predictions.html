<!DOCTYPE html>
<html>
<head>
    <title>Predictions Log - Admin</title>
    <style>
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #aaa; padding: 8px; text-align: left; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>

    <h1>SalamaNet AI â€“ Predictions Log Viewer</h1>

    <form method="get" action="/admin/predictions" style="margin-bottom: 20px;">
        <label for="version">Filter by model version:</label>
        <input type="text" id="version" name="version" value="{{ version }}" placeholder="e.g. sklearn-v1">
        <button type="submit">Filter</button>
        {% if selected_version %}
            <a href="/admin/predictions">(Clear)</a>
        {% endif %}
    </form>

    {% if daily_summary %}
    <h2>ðŸ“Š Daily Summary</h2>
    <table>
        <tr>
            <th>Date</th>
            <th>Total Predictions</th>
            <th>Phishing</th>
            <th>Safe</th>
        </tr>
        {% for day in daily_summary %}
        <tr>
            <td>{{ day.date }}</td>
            <td>{{ day.total }}</td>
            <td>{{ day.phishing }}</td>
            <td>{{ day.safe }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    {% if logs %}
    <h2>ðŸ“œ Full Predictions Log</h2>
    <table>
        <tr>
            <th>Message</th>
            <th>Predicted Label</th>
            <th>Confidence</th>
            <th>Model Version</th>
            <th>Timestamp</th>
        </tr>
        {% for row in logs %}
        <tr>
            <td>{{ row.message }}</td>
            <td>{{ row.label }}</td>
            <td>{{ (row.confidence * 100) | round(2) }}%</td>
            <td>{{ row.model_version }}</td>
            <td>{{ row.timestamp }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>No predictions found{{ ' for this version' if selected_version else '' }}.</p>
    {% endif %}

</body>
</html>
